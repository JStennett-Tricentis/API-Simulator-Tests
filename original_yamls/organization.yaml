schema: SimV1
name: organization

connections:
  - name: organizationApi
    port: 28888

services:
  - name: tenantsService
    description: Simulates the Tosca Cloud Tenants API
    steps:
      - direction: In
        name: receiveTenantsRequest
        trigger:
          - type: Path
            value: /internalApi/v1/tenants
          - type: Method
            value: GET
        buffer:
          - name: requestToken
            type: Header
            key: Authorization
          - name: requestPayload

      - direction: Out
        name: sendTenantsResponse
        message:
          statusCode: 200
          headers:
            - key: Content-Type
              value: application/json
            - key: Server
              value: Kestrel
          payload: |
            [
              {
                "name": "fusionx",
                "region": "neu",
                "spoke": "tplat-neu-dev-003",
                "organizationId": "b76f8d83-bf0d-49d5-8800-e69b5ab21768",
                "internal": true
              }
            ]

  - name: spacesService
    description: Simulates the Tosca Cloud Spaces API
    steps:
      - direction: In
        name: receiveSpacesRequest
        trigger:
          - type: Path
            value: /internalApi/v1/tenants/fusionx/spaces
          - type: Method
            value: GET
        buffer:
          - name: requestToken
            type: Header
            key: Authorization
          - name: requestPayload

      - direction: Out
        name: sendSpacesResponse
        message:
          statusCode: 200
          headers:
            - key: Content-Type
              value: application/json
            - key: Server
              value: Kestrel
          payload: |
            [
              {
                "id": "default",
                "isBuiltIn": true,
                "name": "Default",
                "path": "Default",
                "description": "Default workspace of the tenant.",
                "accessType": "Public",
                "ownerId": ""
              }
            ]