schema: SimV1
name: authorization

connections:
  - name: authorizationApi
    port: 28887

services:
  - name: evaluateService
    description: Simulates the Tosca Cloud Authorization Evaluate API
    steps:
      - direction: In
        name: receiveEvaluateRequest
        trigger:
          - type: Path
            value: /api/v1/evaluate
          - type: Method
            value: GET
        buffer:
          - name: requestToken
            type: Header
            key: Authorization
          - name: requestPayload

      - direction: Out
        name: sendEvaluateResponse
        message:
          statusCode: 200
          headers:
            - key: Content-Type
              value: application/json
            - key: Server
              value: Kestrel
          payload: |
            {
              "authorized": true
            }